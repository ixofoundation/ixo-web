import * as React from 'react'
import { Props } from './types'
import { Back, Down } from '../assets/svgs'
import {
  MobileButtonWrapper,
  MobileButton,
  MobileFilterHeading,
  MobileFilterWrapper,
  MobileFilterHeader,
  MobileFilterModal,
  ModalItems,
  FilterSelectButton,
  HeadingItem,
  DoneButtonWrapper,
  DoneButton,
} from '../ProjectsFilter.style'

const IconListFilterMobile: React.FunctionComponent<Props> = ({
  name,
  items,
  isActive,
  handleToggleFilterShow,
  handleFilterItemClick,
  handleFilterReset,
}) => {
  const itemsSelectedCount = items.filter(item => item.isSelected).length

  return (
    <MobileButtonWrapper
      className={`button-wrapper ${isActive ? 'active' : ''}`}
      onClick={handleToggleFilterShow}
    >
      <MobileButton onClick={handleToggleFilterShow}>
        <span>
          {itemsSelectedCount > 0 ? `${name} - ${itemsSelectedCount}` : name}
        </span>
        <span className="right-arrow">
          <Down width="14" fill="#000" />
        </span>
      </MobileButton>
      <MobileFilterModal
        className="filter-modal"
        style={{ display: isActive ? 'grid' : 'none' }}
      >
        <MobileFilterHeader>
          <HeadingItem onClick={handleToggleFilterShow}>
            <Back />
          </HeadingItem>
          <HeadingItem onClick={handleFilterReset}>clear</HeadingItem>
        </MobileFilterHeader>
        <MobileFilterWrapper>
          <MobileFilterHeading className="tag-select-heading">
            {itemsSelectedCount > 0 ? `${name} - ${itemsSelectedCount}` : name}
          </MobileFilterHeading>
          <ModalItems>
            {items.map(item => {
              const { name: itemName, icon: itemIcon } = item

              const isItemActive = items
                .filter(item => item.isSelected)
                .map(item => item.name)
                .includes(itemName)

              return (
                <FilterSelectButton
                  key={itemName}
                  onClick={(): void => handleFilterItemClick(itemName)}
                  className={isItemActive ? 'buttonPressed' : ''}
                >
                  <h3>{itemName}</h3>
                  <img
                    alt={itemName}
                    src={require('../assets/icons/' + itemIcon)}
                  />
                </FilterSelectButton>
              )
            })}
          </ModalItems>
        </MobileFilterWrapper>
        <DoneButtonWrapper>
          <DoneButton onClick={handleToggleFilterShow}>Done</DoneButton>
        </DoneButtonWrapper>
      </MobileFilterModal>
    </MobileButtonWrapper>
  )
}

export default IconListFilterMobile
